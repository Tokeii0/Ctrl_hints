# Ctrl快捷键提示工具 - 项目结构说明

## 📁 项目重构完成

项目已成功重构为模块化结构，每个模块职责清晰，便于维护和扩展。

## 🏗️ 项目结构

```
ctrl_hints/
├── main.py                    # 🚀 程序主入口
├── core/                      # 🔧 核心模块
│   ├── __init__.py           # 模块初始化
│   ├── app.py                # 主应用程序类
│   ├── keyboard_listener.py  # 键盘监听器
│   └── tray_manager.py       # 系统托盘管理
├── ui/                       # 🎨 用户界面模块
│   ├── __init__.py           # 模块初始化
│   ├── hint_widget.py        # 提示窗口组件
│   ├── card_widget.py        # 快捷键卡片组件
│   └── settings_dialog.py    # 设置对话框
├── utils/                    # 🛠️ 工具模块
│   ├── __init__.py           # 模块初始化
│   ├── config.py             # 配置管理
│   └── constants.py          # 常量定义
├── resources/                # 📦 资源文件
│   ├── styles.qss            # 样式表
│   └── logo.png              # 应用图标
├── requirements.txt          # 📋 依赖列表
├── config.json              # ⚙️ 配置文件
└── README.md                # 📖 项目说明
```

## 🔍 模块详细说明

### 🚀 main.py - 程序入口
- 程序的主入口点
- 处理高DPI设置
- 检查依赖项
- 创建并启动主应用程序

### 🔧 core/ - 核心模块

#### app.py - 主应用程序类
- `CtrlHintApp`: 主应用程序类
- 整合所有模块
- 管理应用程序生命周期
- 处理按键事件和窗口显示逻辑

#### keyboard_listener.py - 键盘监听器
- `KeyboardListener`: 键盘事件监听类
- 使用pynput监听键盘事件
- 发出按键按下/释放信号
- 支持Ctrl、Alt、Win键及组合键

#### tray_manager.py - 系统托盘管理
- `TrayManager`: 系统托盘管理类
- 创建和管理托盘图标
- 处理托盘菜单事件
- 显示托盘消息

### 🎨 ui/ - 用户界面模块

#### hint_widget.py - 提示窗口组件
- `HintWidget`: 快捷键提示窗口
- 管理窗口显示和隐藏动画
- 处理窗口定位逻辑
- 加载和应用样式

#### card_widget.py - 快捷键卡片组件
- `ShortcutCardWidget`: 单个快捷键卡片
- 显示按键和对应动作
- 支持自定义样式和高亮效果
- 圆角设计和阴影效果

#### settings_dialog.py - 设置对话框
- `SettingsDialog`: 设置配置对话框
- 支持编辑各种快捷键组合
- 完整的外观设置界面
- 颜色选择器和滑块控件
- 实时预览和数据验证

#### color_button.py - 颜色选择按钮
- `ColorButton`: 颜色选择按钮组件
- 集成颜色选择对话框
- 实时颜色预览
- 颜色改变信号

### 🛠️ utils/ - 工具模块

#### config.py - 配置管理
- 配置文件的加载和保存
- 全局配置变量管理
- 配置验证功能
- 默认配置重置

#### constants.py - 常量定义
- 默认快捷键配置
- 外观和效果配置
- 键盘按键映射
- 配置文件路径

## 🎯 重构优势

### ✅ 模块化设计
- **职责分离**: 每个模块负责特定功能
- **低耦合**: 模块间依赖关系清晰
- **高内聚**: 相关功能集中在同一模块

### ✅ 易于维护
- **代码组织**: 功能相关的代码集中管理
- **错误定位**: 问题更容易定位和修复
- **功能扩展**: 新功能可以独立开发和测试

### ✅ 可扩展性
- **插件化**: 可以轻松添加新的快捷键类型
- **主题系统**: 外观设置可以独立扩展
- **国际化**: 支持多语言扩展

### ✅ 代码复用
- **组件化**: UI组件可以在不同地方复用
- **工具函数**: 通用功能可以被多个模块使用
- **配置管理**: 统一的配置管理机制

## 🚀 使用方法

### 运行程序
```bash
python main.py
```

### 开发模式
```bash
# 安装依赖
pip install -r requirements.txt

# 运行程序
python main.py
```

### 功能特点
- ✨ 按住 Ctrl、Alt、Win 键显示快捷键提示
- 🎨 美观的卡片式界面设计
- 🎬 流畅的动画效果
- ⚙️ 可自定义快捷键配置
- 🎨 完整的外观自定义功能
  - 8种内置样式预设
  - 实时预览功能
  - 卡片尺寸调整
  - 字体大小设置
  - 颜色主题自定义
  - 透明度控制
  - 动画效果开关
- 🔧 系统托盘后台运行
- 📱 支持高DPI显示

## 🔧 技术栈

- **GUI框架**: PySide6 (Qt6)
- **键盘监听**: pynput
- **配置管理**: JSON
- **样式设计**: QSS (Qt Style Sheets)
- **动画效果**: Qt Property Animation

## 📝 开发说明

### 添加新的快捷键类型
1. 在 `utils/constants.py` 中添加默认配置
2. 在 `core/keyboard_listener.py` 中添加按键检测逻辑
3. 在 `core/app.py` 中添加窗口管理逻辑
4. 在 `ui/settings_dialog.py` 中添加设置界面

### 自定义样式
1. 修改 `resources/styles.qss` 文件
2. 或在 `ui/hint_widget.py` 中修改默认样式

### 添加新功能
1. 在对应模块中添加功能代码
2. 更新模块的 `__init__.py` 文件
3. 在主应用程序中集成新功能

## 🐛 问题解决

### 导入错误
- 确保所有模块使用绝对导入
- 检查 `sys.path` 设置是否正确

### 样式不生效
- 检查 `resources/styles.qss` 文件是否存在
- 确认样式选择器名称正确

### 键盘监听失效
- 检查是否有权限问题
- 确认pynput库安装正确

---

🎉 **重构完成！** 现在项目结构更加清晰，代码更易维护和扩展。 